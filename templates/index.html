<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Log Classification System</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Log Classification System</h1>
            <p class="subtitle">Upload your log files and classify log messages automatically using AI.</p>
        </header>
        <section class="description">
            <h2>How it works</h2>
            <ul>
                <li><b>Input file:</b> Upload a CSV file with columns <code>source</code> and <code>log_message</code>.</li>
                <li><b>Output file:</b> Download a CSV with an extra column <code>predicted_label</code> containing the predicted class.</li>
                <li>Preview the classified logs below after upload.</li>
            </ul>
        </section>
        <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
            <label for="file-upload" class="custom-file-upload">
                Select CSV File
            </label>
            <input id="file-upload" type="file" name="file" accept=".csv" required>
            <button type="submit">Classify Logs</button>
        </form>
        {% if results %}
        <section class="results">
            <h2>Classification Results</h2>
            <table>
                <thead>
                    <tr>
                        <th>Source</th>
                        <th>Log Message</th>
                        <th>Predicted Label</th>
                    </tr>
                </thead>
                <tbody>
                {% for row in results %}
                    <tr>
                        <td>{{ row.source }}</td>
                        <td>{{ row.log_message }}</td>
                        <td>{{ row.predicted_label }}</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <a href="/download" class="download-btn">Download Output CSV</a>
        </section>
        {% endif %}
    </div>
    <script src="/static/scripts.js"></script>
</body>
</html>
